(this["webpackJsonpreport-sofort"]=this["webpackJsonpreport-sofort"]||[]).push([[0],{11:function(e){e.exports=JSON.parse('{"graphQLEndpoint":"https://stage.buergermeldungen.com/graphql","reportTableHeader":[{"title":"Meldung","isButton":false},{"title":"Ort","isButton":false},{"title":"Status","isButton":false},{"title":"Kommentare","isButton":false},{"title":"Details","isButton":true}]}')},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(19),s=n.n(r),i=n(7),o=n(4),l=n(2),u=n.n(l),d=n(3),j=n(6),x=n.p+"static/media/logo.e2636b86.svg",p=n(0);function m(){var e=Object(o.f)(),t="px-3 py-2 rounded-md text-sm font-medium",n="block px-3 py-2 rounded-md text-base font-medium",c=function(t){return e.pathname===t?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"};return Object(p.jsx)("div",{children:Object(p.jsxs)("nav",{className:"bg-gray-800",children:[Object(p.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Object(p.jsxs)("div",{className:"flex items-center justify-between h-16",children:[Object(p.jsxs)("div",{className:"flex items-center",children:[Object(p.jsx)("div",{className:"flex-shrink-0",children:Object(p.jsx)("img",{className:"h-8 w-8",src:x,alt:"Logo"})}),Object(p.jsx)("div",{className:"hidden md:block",children:Object(p.jsxs)("div",{className:"ml-10 flex items-baseline space-x-4",children:[Object(p.jsx)(i.b,{to:"/",className:"".concat(c("/")," ").concat(t),children:"Neuste Meldungen"}),Object(p.jsx)(i.b,{to:"/nearby",className:"".concat(c("/nearby")," ").concat(t),children:"In der N\xe4he"}),Object(p.jsx)(i.b,{to:"/locations",className:"".concat(c("/locations")," ").concat(t),children:"Gemeinden"})]})})]}),Object(p.jsx)("div",{className:"-mr-2 flex md:hidden"})]})}),Object(p.jsx)("div",{className:"md:hidden",children:Object(p.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 flex flex-col items-center",children:[Object(p.jsx)(i.b,{to:"/",className:"".concat(c("/")," ").concat(n),children:"Neuste Meldungen"}),Object(p.jsx)(i.b,{to:"/nearby",className:"".concat(c("/nearby")," ").concat(n),children:"In der N\xe4he"}),Object(p.jsx)(i.b,{to:"/locations",className:"".concat(c("/locations")," ").concat(n),children:"Gemeinden"})]})})]})})}function b(e){var t=e.children;return Object(p.jsx)("header",{className:"bg-white shadow",children:Object(p.jsx)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:Object(p.jsx)("h3",{className:"text-3xl font-bold text-gray-900",children:t})})})}function h(e){var t=e.children,n=e.title;return Object(p.jsxs)("div",{children:[Object(p.jsx)(m,{}),n&&Object(p.jsx)(b,{children:n}),Object(p.jsx)("main",{children:Object(p.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:t})})]})}var f=n(18),O=n(11),y="https://api.ipify.org?format=json",g="http://ip-api.com/json",v={method:"GET",redirect:"follow"};function N(){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(u.a.mark((function e(){var t,n,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.next=8,fetch("".concat(g,"/").concat(n.ip),v);case 8:return c=e.sent,e.next=11,c.json();case 11:return a=e.sent,e.abrupt("return",{lat:a.lat,lon:a.lon});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(I);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.data.municipalities.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return B.apply(this,arguments)}function B(){return(B=Object(d.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(E(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c.data.municipality.name);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(O.graphQLEndpoint,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:t})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I="{\n  municipalities(count: 100) {\n    data {\n      id,\n      name,\n      country,\n      state,\n      district,\n      location {\n        latitude,\n        longitude\n      }\n    }\n  }\n}",E=function(e){return"{\n    municipality(id: ".concat(e,") {\n      name\n    }\n  }")};function T(e,t){return q.apply(this,arguments)}function q(){return(q=Object(d.a)(u.a.mark((function e(t,n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return c=e.sent,e.abrupt("return",G(c.lat,c.lon,t,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t,n,c){var a=D(n-e),r=D(c-t),s=Math.sin(a/2)*Math.sin(a/2)+Math.cos(D(e))*Math.cos(D(n))*Math.sin(r/2)*Math.sin(r/2),i=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return Math.round(6371*i)}function D(e){return e*(Math.PI/180)}function H(){return J.apply(this,arguments)}function J(){return(J=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(U);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.data.reports.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return K.apply(this,arguments)}function K(){return(K=Object(d.a)(u.a.mark((function e(){var t,n,c,a,r,s,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return t=e.sent,e.next=5,k();case 5:for(n=e.sent,c=[],a=0;a<n.length;a++)c.push(Object(f.a)(Object(f.a)({},n[a]),{},{distance:G(n[a].location.latitude,n[a].location.longitude,t.lat,t.lon)}));c.sort((function(e,t){return e.distance-t.distance})),r=null,s=0;case 11:if(r||!(s<c.length)){e.next=17;break}return e.next=14,P(c[s].id);case 14:r=e.sent,e.next=11;break;case 17:return e.next=19,_(Y(r[0].id));case 19:return i=e.sent,e.next=22,i.json();case 22:return o=e.sent,e.abrupt("return",o.data.reportsNearby.data);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(d.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(R(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c.data.reports.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(u.a.mark((function e(t){var n,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(V(t));case 2:return c=e.sent,e.next=5,c.json();case 5:return a=e.sent,e.abrupt("return",null===(n=a.data)||void 0===n?void 0:n.report);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return z.apply(this,arguments)}function z(){return(z=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(O.graphQLEndpoint,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:t})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U='{\n  reports(sortType: "createdAt") {\n    data {\n      id,\n      title,\n      createdAt,\n      status {\n        name\n      },\n      commentCount,\n      municipality {\n        name,\n        country\n      },\n      location {\n        latitude,\n        longitude\n      }\n    }\n  }\n}',Y=function(e){return"{\n    reportsNearby(reportId: ".concat(e,") {\n      data {\n        id,\n        title,\n        createdAt,\n        status {\n          name\n        },\n        commentCount,\n        municipality {\n          name,\n          country\n        }\n      }\n    }\n  }")},R=function(e){return"{\n    reports(municipalityId: ".concat(e,', sortType: "createdAt") {\n      data {\n        id,\n        title,\n        createdAt,\n        status {\n          name\n        },\n        commentCount,\n        municipality {\n          name,\n          country\n        }\n      }\n    }\n  }')},V=function(e){return"{\n    report(id: ".concat(e,") {\n      category {\n        name,\n      },\n      title,\n      description,\n      location {\n        latitude,\n        longitude\n      },\n      createdAt,\n      commentCount,\n      comments {\n        text,\n        createdAt\n      },\n      municipality {\n        name,\n        country\n      }\n    }\n  }")};function W(e){var t=e.children;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(p.jsx)("div",{className:"flex items-center",children:Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name})})})}),Object(p.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[Object(p.jsx)("div",{className:"text-sm text-gray-900",children:t.district}),Object(p.jsx)("div",{className:"text-sm text-gray-500",children:t.state})]}),Object(p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(p.jsx)("span",{className:function(){var e="px-2 inline-flex text-xs leading-5 font-semibold rounded-full";switch(t.country){case"\xd6sterreich":return"".concat(e," bg-red-100 text-red-800");case"Deutschland":return"".concat(e," bg-yellow-100 text-yellow-800");default:return"".concat(e," bg-green-100 text-green-800")}}(),children:t.country})}),Object(p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:Object(p.jsx)(i.b,{to:"/locations/".concat(t.id),className:"text-indigo-600 hover:text-indigo-900",children:"Zu den Meldungen"})})]})}function X(e){var t=e.header,n=e.children;return Object(p.jsx)("div",{className:"flex flex-col",children:Object(p.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(p.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(p.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(p.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[Object(p.jsx)("thead",{className:"bg-gray-50",children:Object(p.jsx)("tr",{children:t.map((function(e){return Object(p.jsx)(te,{isButton:e.isButton,children:e.title},e.title)}))})}),Object(p.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:"Gemeinde"===t[0].title?n.map((function(e){return Object(p.jsx)(W,{children:e},e.id)})):n.map((function(e){return Object(p.jsx)(ee,{children:e},e.id)}))})]})})})})})}function $(e){var t=new Date(e),n=t.getDate(),c=t.toLocaleString("de-at",{month:"long"}),a=t.getFullYear(),r=t.getHours(),s=(t.getMinutes()<10?"0":"")+t.getMinutes();return"".concat(n,". ").concat(c," ").concat(a," um ").concat(r,":").concat(s," Uhr")}function ee(e){var t=e.children;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(p.jsx)("div",{className:"flex items-center",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.title.length>70?"".concat(t.title.substring(0,67),"..."):t.title}),Object(p.jsx)("div",{className:"text-sm text-gray-500",children:$(t.createdAt)})]})})}),Object(p.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[Object(p.jsx)("div",{className:"text-sm text-gray-900",children:t.municipality.name}),Object(p.jsx)("div",{className:"text-sm text-gray-500",children:t.municipality.country})]}),Object(p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(p.jsx)("span",{className:function(){var e="px-2 inline-flex text-xs leading-5 font-semibold rounded-full";switch(t.status.name){case"Neu":return"".concat(e," bg-blue-100 text-blue-800");case"Angenommen":return"".concat(e," bg-yellow-100 text-yellow-800");case"Zur\xfcckgestellt":case"Nicht m\xf6glich":return"".concat(e," bg-red-100 text-red-800");default:return"".concat(e," bg-green-100 text-green-800")}}(),children:t.status.name})}),Object(p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.commentCount}),Object(p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:Object(p.jsx)(i.b,{to:"/reports/".concat(t.id),className:"text-indigo-600 hover:text-indigo-900",children:"Details"})})]})}function te(e){var t=e.isButton,n=void 0!==t&&t,c=e.children;return n?Object(p.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:Object(p.jsx)("span",{className:"sr-only",children:c})}):Object(p.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:c})}n(35);var ne=function(){return Object(p.jsx)("div",{className:"loader",children:Object(p.jsx)("div",{className:"loader__animation"})})};function ce(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!0),s=Object(j.a)(r,2),i=s[0],o=s[1];Object(c.useEffect)((function(){l()}),[]);var l=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:t=e.sent,a(t),o(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(h,{title:"Neuste Meldungen",children:i?Object(p.jsx)(ne,{}):Object(p.jsx)(X,{header:O.reportTableHeader,children:n})})}function ae(){return Object(p.jsx)("div",{children:"Not found!"})}function re(e){var t=e.timestamp,n=e.children;return Object(p.jsxs)("li",{className:"pl-3 pr-4 py-3 flex flex-col justify-between text-sm",children:[Object(p.jsxs)("p",{className:"text-gray-500 ml-2 mb-2",children:[$(t),":"]}),Object(p.jsx)("p",{className:"ml-2",children:n})]})}function se(e){var t=e.children;return Object(p.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Object(p.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Kommentare"}),Object(p.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:Object(p.jsx)("ul",{className:"border border-gray-200 rounded-md divide-y divide-gray-200",children:t.map((function(e){return Object(p.jsx)(re,{timestamp:e.createdAt,children:e.text},e.createdAt)}))})})]})}function ie(e){var t=e.backgroundColorClass,n=void 0===t?"bg-gray-50":t,c=e.label,a=e.children;return Object(p.jsxs)("div",{className:"".concat(n," px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"),children:[Object(p.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:c}),Object(p.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:a})]})}function oe(e){var t=e.match.params.reportId,n=Object(c.useState)({}),a=Object(j.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!0),o=Object(j.a)(i,2),l=o[0],x=o[1],m=Object(c.useState)(3),b=Object(j.a)(m,2),f=b[0],O=b[1],y=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t);case 2:return n=e.sent,s(n),e.t0=O,e.next=7,T(n.location.latitude,n.location.longitude);case 7:e.t1=e.sent,(0,e.t0)(e.t1),x(!1);case 10:case"end":return e.stop()}}),e)}))),[t]);return Object(c.useEffect)((function(){y()}),[y]),Object(p.jsx)(p.Fragment,{children:l||r?Object(p.jsx)(h,{children:l?Object(p.jsx)(ne,{}):Object(p.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[Object(p.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[Object(p.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:r.title}),Object(p.jsxs)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:[$(r.createdAt),", etwa ",f," Kilometer entfernt"]})]}),Object(p.jsx)("div",{className:"border-t border-gray-200",children:Object(p.jsxs)("dl",{children:[Object(p.jsx)(ie,{label:"Beschreibung",children:r.description}),Object(p.jsx)(ie,{backgroundColorClass:"bg-white",label:"Kategorie",children:r.category.name}),Object(p.jsx)(ie,{label:"Ort",children:"".concat(r.municipality.name,", ").concat(r.municipality.country)}),r.comments.length>0&&Object(p.jsx)(se,{children:r.comments})]})})]})}):Object(p.jsx)(ae,{})})}function le(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!0),s=Object(j.a)(r,2),i=s[0],o=s[1];Object(c.useEffect)((function(){l()}),[]);var l=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:t=e.sent,a(t),o(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(h,{title:"In der N\xe4he",children:i?Object(p.jsx)(ne,{}):Object(p.jsx)(X,{header:O.reportTableHeader,children:n})})}function ue(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!0),s=Object(j.a)(r,2),i=s[0],o=s[1];Object(c.useEffect)((function(){l()}),[]);var l=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,a(t),o(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(h,{title:"Gemeinden",children:i?Object(p.jsx)(ne,{}):Object(p.jsx)(X,{header:[{title:"Gemeinde",isButton:!1},{title:"Bezirk / Bundesland",isButton:!1},{title:"Staat",isButton:!1},{title:"Zu den Meldungen",isButton:!0}],children:n})})}function de(e){var t=e.match.params.locationId,n=Object(c.useState)([]),a=Object(j.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(""),o=Object(j.a)(i,2),l=o[0],x=o[1],m=Object(c.useState)(!0),b=Object(j.a)(m,2),f=b[0],y=b[1],g=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return n=e.sent,x(n),e.next=6,P(t);case 6:c=e.sent,s(c),y(!1);case 9:case"end":return e.stop()}}),e)}))),[t]);return Object(c.useEffect)((function(){g()}),[g]),Object(p.jsx)(h,{title:l&&"Meldungen aus ".concat(l),children:f?Object(p.jsx)(ne,{}):Object(p.jsx)(X,{header:O.reportTableHeader,children:r})})}function je(){return Object(p.jsx)(i.a,{children:Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{exact:!0,path:"/",component:ce}),Object(p.jsx)(o.a,{exact:!0,path:"/reports/:reportId",component:oe}),Object(p.jsx)(o.a,{exact:!0,path:"/nearby",component:le}),Object(p.jsx)(o.a,{exact:!0,path:"/locations",component:ue}),Object(p.jsx)(o.a,{exact:!0,path:"/locations/:locationId",component:de}),Object(p.jsx)(o.a,{component:ae})]})})}n(36);s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(je,{})}),document.querySelector("#root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.982fe139.chunk.js.map